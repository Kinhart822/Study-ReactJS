<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React App</title>
    <script
      crossorigin
      src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"
    ></script>

    <!-- Babel Standalone:
         - Dịch JSX → React.createElement
         - ES6 -> ES5
    -->
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
  </head>

  <body>
    <div id="root"></div>

    <!-- type="text/babel": báo cho Babel compile JSX -->
    <script type="text/babel">
      /* =====================================================
      JSX (JavaScript XML)
      =====================================================
      - JSX là cú pháp mở rộng của JavaScript
      - Cho phép viết UI giống HTML ngay trong JS
      - JSX KHÔNG phải HTML và KHÔNG phải DOM
      - JSX sẽ được Babel compile thành React.createElement
      */

      /* -----------------------------------------------------
      JSX ELEMENT
      -----------------------------------------------------
      - JSX element chỉ là JavaScript object
      - Dùng để mô tả UI, chưa tạo DOM thật
      */
      const h1JSX = <h1>JSX</h1>;

      const ul = (
        <ul>
          <li>JS</li>
          <li>React</li>
          <li>Node</li>
        </ul>
      );

      /* -----------------------------------------------------
      DATA SOURCE
      -----------------------------------------------------
      - Mảng dữ liệu thường được render bằng map()
      */
      const courses = [
        { id: 1, name: "JS" },
        { id: 2, name: "Fuck" },
        { id: 3, name: "Node" },
      ];

      /* -----------------------------------------------------
      map() → JSX LIST
      -----------------------------------------------------
      - map() chuyển array data → array React element
      - Mỗi phần tử trong list PHẢI có key
      */
      const listCourses = courses.map((course) => (
        <li key={course.id}>{course.name}</li>
      ));

      /* -----------------------------------------------------
      KEY TRONG JSX
      -----------------------------------------------------
      - key giúp React so sánh (diff) danh sách hiệu quả
      - key KHÔNG được truyền xuống component con qua props
      - Chỉ dùng nội bộ cho React
      */
      const ulCourses = (
        <ul>
          {courses.map((course) => (
            <li key={course.id}>{course.name}</li>
          ))}
        </ul>
      );

      /* -----------------------------------------------------
      JSX vs React.createElement
      -----------------------------------------------------
      - JSX chỉ là syntax sugar
      - Babel sẽ dịch JSX thành React.createElement
      */

      // JSX version
      // const jsx = (
      //   <React.Fragment>
      //     <h1>JSX</h1>
      //     <ul>
      //       {courses.map((course) => (
      //         <li key={course.id}>{course.name}</li>
      //       ))}
      //     </ul>
      //   </React.Fragment>
      // );

      // createElement version (sau khi Babel compile)
      const jsx = React.createElement(
        React.Fragment, // Fragment: nhóm nhiều element, không tạo DOM node
        null,
        React.createElement("h1", null, "JSX"),
        React.createElement("ul", null, listCourses)
      );

      /* -----------------------------------------------------
      RENDER REACT ELEMENT
      -----------------------------------------------------
      - createRoot() tạo React root
      - render() chỉ nhận DUY NHẤT 1 React element
      */
      const reactRoot = ReactDOM.createRoot(document.getElementById("root"));
      reactRoot.render(jsx);

      /* -----------------------------------------------------
      LƯU Ý QUAN TRỌNG
      -----------------------------------------------------
      ❗ reactRoot.render() chỉ render 1 React Element
      ❗ Nếu cần render nhiều element → dùng Fragment
      */

      // ❌ Sai
      // reactRoot.render(h1JSX);
      // reactRoot.render(ul);

      // ✅ Đúng
      // reactRoot.render(
      //   <React.Fragment>
      //     {h1JSX}
      //     {ul}
      //   </React.Fragment>
      // );
    </script>
  </body>
</html>
